data:text/html;charset=utf-8,%0A%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%20%20%3Ctitle%3EFlappy%3C%2Ftitle%3E%0A%20%20%3Cstyle%3E%0A%20%20%09body%20%7B%0A%20%20%09%09margin%3A0%3B%0A%20%20%09%09padding%3A0%3B%0A%20%20%09%09display%3Aflex%3B%0A%20%20%09%09align-items%3Acenter%3B%0A%20%20%09%09justify-content%3Acenter%3B%0A%20%20%09%09width%3A%20100vw%3B%0A%20%20%09%09height%3A100vh%3B%0A%20%20%09%09background%3Ablack%3B%0A%20%20%09%7D%0A%20%20%09%23flp-canv%20%7B%0A%20%20%09%09background%3A%230be4f4%3B%0A%20%20%09%7D%0A%20%20%3C%2Fstyle%3E%0A%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%22%3E%0A%3C%2Fhead%3E%0A%3Cbody%20lang%3D%22en%22%3E%0A%20%20%3Ccanvas%20id%3D'flp-canv'%20width%3D'800px'%20height%3D'800px'%3E%3C%2Fcanvas%3E%0A%20%20%3Cscript%3E%0Awindow.onbeforeunload%20%3D%20()%3D%3E1%3B%0A%0Aclass%20flapGame%7B%0A%09constructor(c%2Cd)%7B%0A%09%09this.c%20%3D%20c%3B%0A%09%09this.d%20%3D%20d%3B%0A%09%09this.ctx%20%3D%20this.c.getContext('2d')%3B%0A%09%09this.atx%20%3D%20new%20(window.AudioContext%20%7C%7C%20window.webkitAudioContext)()%3B%0A%09%09this.r%20%3D%2030%3B%0A%09%09this.hs%20%3D%200%3B%0A%09%09this.sc%20%3D%200%3B%0A%09%09this.pw%20%3D%2080%3B%0A%09%09this.hpw%20%3D%20this.pw%2F2%3B%0A%09%09this.dr%20%3D%20this.r*2%3B%0A%09%09this.ph%20%3D%20this.dr*1.5%3B%0A%09%09this.hw%20%3D%20this.c.width%2F2%3B%0A%09%09this.hh%20%3D%20this.c.height%2F2%3B%0A%09%09this.pbt%20%3D%2020%3B%0A%09%09this.hpbt%20%3D%20this.pbt%2F2%3B%0A%09%09this.phw%20%3D%2010%3B%0A%09%09this.pwsbt%20%3D%20this.pw-this.pbt%3B%0A%09%09this.v%20%3D%203%3B%0A%09%09this.fly%20%3D%20false%3B%0A%09%09this.flying%20%3D%200%3B%0A%09%09this.flytime%20%3D%200%3B%0A%09%09this.pipes%20%3D%20%5B%5D%3B%20%2F%2F%5Bx%2Cy%2Cup%2Fdown%20bool%5D%0A%09%09this.reset()%3B%0A%09%09this.gameLoop%20%3D%20this.gameLoop.bind(this)%3B%0A%09%09this.ctx.font%20%3D%20'30px%20Arial'%3B%0A%09%09this.c.addEventListener('click'%2C()%3D%3E%7B%0A%09%09%09if(!this.s)%7B%0A%09%09%09%09this.s%20%3D%20true%3B%0A%09%09%09%09this.y%20%3D%20this.c.height%2F2%3B%0A%09%09%09%09this.gameLoop()%3B%0A%09%09%09%7Delse%7B%0A%09%09%09%09%2F%2Fthis.y%20%3D%20Math.max(this.y-60%2Cthis.r)%3B%0A%09%09%09%09this.g%20%3D%20-5.5%3B%0A%09%09%09%7D%0A%09%09%7D)%3B%0A%09%09document.addEventListener('keydown'%2Ce%3D%3E%7B%0A%09%09%09switch(e.code)%7B%0A%09%09%09case%20'Space'%3A%0A%09%09%09%09if(!this.s)%7B%0A%09%09%09%09%09this.s%20%3D%20true%3B%0A%09%09%09%09%09this.y%20%3D%20this.c.height%2F2%3B%0A%09%09%09%09%09this.gameLoop()%3B%0A%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%2F%2Fthis.y%20%3D%20Math.max(this.y-60%2Cthis.r)%3B%0A%09%09%09%09%09this.g%20%3D%20-5.5%3B%0A%09%09%09%09%7D%0A%09%09%09%09break%3B%0A%09%09%09case%20'KeyD'%3A%0A%09%09%09%09this.d%20%3D%20!this.d%3B%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%7D)%3B%0A%09%09this.drawStart()%3B%0A%09%7D%0A%09drawStart(d%2Cs)%7B%0A%09%09this.ctx.clearRect(0%2C0%2Cthis.c.width%2Cthis.c.height)%3B%0A%09%09this.ctx.font%20%3D%20'bold%20100px%20cursive'%3B%0A%09%09if(d)%7B%0A%09%09%09this.ctx.fillStyle%20%3D%20'red'%3B%0A%09%09%09const%20tm%20%3D%20this.ctx.measureText('You%20Died!')%3B%0A%09%09%09this.ctx.fillText('You%20Died!'%2Cthis.hw-tm.width%2F2%2Cthis.hh-70)%3B%0A%09%09%7Delse%7B%0A%09%09%09this.ctx.fillStyle%20%3D%20'yellow'%3B%0A%09%09%09const%20tm%20%3D%20this.ctx.measureText('Flappy%20Bird')%3B%0A%09%09%09this.ctx.fillText('Flappy%20Bird'%2Cthis.hw-tm.width%2F2%2Cthis.hh-70)%3B%0A%09%09%7D%0A%09%09this.drawBird()%3B%0A%09%09this.ctx.fillStyle%20%3D%20'black'%3B%0A%09%09this.ctx.font%20%3D%20'50px%20Arial'%3B%0A%09%09const%20cstm%20%3D%20this.ctx.measureText('Press%20space%2Fclick')%3B%0A%09%09this.ctx.fillText('Press%20space%2Fclick'%2Cthis.hw-cstm.width%2F2%2Cthis.hh%2B75)%3B%0A%09%09this.ctx.font%20%3D%20'30px%20Arial'%3B%0A%09%09const%20htxt%20%3D%20'Highscore%3A%20'%20%2B%20this.hs.toString()%3B%0A%09%09const%20htm%20%3D%20this.ctx.measureText(htxt)%3B%0A%09%09this.ctx.fillText(htxt%2Cthis.hw-htm.width%2F2%2Cthis.hh%2B120)%3B%0A%09%09if(d)%7B%0A%09%09%09const%20stxt%20%3D%20'Score%3A%20'%20%2B%20s.toString()%3B%0A%09%09%09const%20stm%20%3D%20this.ctx.measureText(stxt)%3B%0A%09%09%09this.ctx.fillText(stxt%2Cthis.hw-stm.width%2F2%2Cthis.hh%2B160)%3B%0A%09%09%7D%0A%09%09this.ctx.font%20%3D%20'15px%20Arial'%3B%0A%09%09const%20ctxt%20%3D%20'%C2%A9%20Frost%20'%20%2B%20(new%20Date).getFullYear().toString()%20%2B%20'%20%7C%7C%20CC-BY-NC-SA%204.0'%3B%0A%09%09const%20ctm%20%3D%20this.ctx.measureText(ctxt)%3B%0A%09%09this.ctx.fillText(ctxt%2Cthis.c.width-ctm.width-20%2Cthis.c.height-20)%3B%0A%09%09this.ctx.fillText('Press%20d%20for%20debug'%2C20%2Cthis.c.height-20)%3B%0A%09%09this.ctx.font%20%3D%20'30px%20Arial'%3B%0A%09%7D%0A%09gameLoop()%7B%0A%09%09this.ctx.clearRect(0%2C0%2Cthis.c.width%2Cthis.c.height)%3B%0A%09%09this.drawBird()%3B%0A%09%09if(this.d)%7B%0A%09%09%09this.ctx.fillStyle%20%3D%20'black'%3B%0A%09%09%09this.ctx.fillRect(this.hw%2Cthis.y%2C2%2C2)%3B%0A%09%09%09this.ctx.fillRect(0%2Cthis.y%2Cthis.dr%2C2)%3B%0A%09%09%09this.ctx.beginPath()%3B%0A%09%09%09this.ctx.moveTo(this.hw%2Cthis.y)%3B%0A%09%09%09this.ctx.lineTo(this.hw%2Bthis.v*10%2Cthis.y%2Bthis.g*10)%3B%0A%09%09%09this.ctx.stroke()%3B%0A%09%09%09this.ctx.closePath()%3B%0A%09%09%7D%0A%09%09for(let%20i%3Dthis.pipes.length-1%3Bi%3E%3D0%3Bi--)%7B%0A%09%09%09const%20ox%20%3D%20this.pipes%5Bi%5D%5B0%5D-this.x%3B%0A%09%09%09const%20x%20%3D%20ox%2Bthis.hw%3B%0A%09%09%09if(x%20%3C%20-this.pw)%7B%0A%09%09%09%09this.pipes.splice(i%2C1)%3B%0A%09%09%09%7Delse%7B%0A%09%09%09%09const%20y%20%3D%20this.pipes%5Bi%5D%5B1%5D%2Bthis.ph%3B%0A%09%09%09%09this.ctx.fillStyle%20%3D%20'green'%3B%0A%09%09%09%09this.ctx.fillRect(x%2Bthis.hpbt%2Cy%2Cthis.pwsbt%2Cthis.c.height-y)%3B%0A%09%09%09%09this.ctx.fillRect(x%2Bthis.hpbt%2C0%2Cthis.pwsbt%2Cthis.pipes%5Bi%5D%5B1%5D-this.ph)%3B%0A%09%09%09%09this.ctx.fillRect(x%2Cy%2Cthis.pw%2Cthis.phw)%3B%0A%09%09%09%09this.ctx.fillRect(x%2Cthis.pipes%5Bi%5D%5B1%5D-this.ph%2Cthis.pw%2Cthis.phw)%3B%0A%09%09%09%09if(this.d)%7B%0A%09%09%09%09%09this.ctx.fillStyle%20%3D%20'red'%3B%0A%09%09%09%09%09this.ctx.fillRect(x%2Cthis.pipes%5Bi%5D%5B1%5D%2Cthis.pw%2C2)%3B%0A%09%09%09%09%09this.ctx.fillRect(ox%2Bthis.hpw%2Cthis.pipes%5Bi%5D%5B1%5D%2Cthis.dr%2C2)%3B%0A%09%09%09%09%09this.ctx.fillStyle%20%3D%20'blue'%3B%0A%09%09%09%09%09this.ctx.fillRect(x%2Cthis.pipes%5Bi%5D%5B1%5D-this.ph%2C2%2Cthis.ph*2)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if(Math.abs(ox%2Bthis.hpw)-this.r%20%3C%3D%20this.hpw%20%26%26%20Math.abs(this.y-this.pipes%5Bi%5D%5B1%5D)%2Bthis.r%20%3E%3D%20this.ph)%7B%0A%09%09%09%09%09this.reset()%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%09%09this.ctx.fillStyle%20%3D%20'black'%3B%0A%09%09if(this.d)%7B%0A%09%09%09this.ctx.fillText('X%3A%20'%2Bthis.x.toString()%2C20%2C80)%3B%0A%09%09%09this.ctx.fillText('Y%3A%20'%2Bthis.y.toString()%2C20%2C110)%3B%0A%09%09%09this.ctx.fillText('G%3A%20'%2Bthis.g.toString()%2C20%2C140)%3B%0A%09%09%7D%0A%09%09this.ctx.fillText(this.sc%2C20%2C50)%3B%0A%09%09%0A%09%09if(this.y%20%3E%3D%20this.c.height-this.r)%7B%0A%09%09%09this.reset()%3B%0A%09%09%7Delse%7B%0A%09%09%09this.y%20%2B%3D%20this.g%3B%0A%09%09%09this.g%2B%3D0.2%3B%0A%09%09%09this.x%20%2B%3D%20this.v%3B%0A%09%09%09if(Math.floor(this.x%20%2F%20500)%2B1%20%3E%20this.sc)%7B%0A%09%09%09%09this.sc%20%2B%3D%201%3B%0A%09%09%09%09const%20beep%20%3D%20this.atx.createOscillator()%3B%0A%09%09%09%09beep.type%20%3D%20'square'%3B%0A%09%09%09%09beep.frequency.value%20%3D%20783%3B%0A%09%09%09%09beep.connect(this.atx.destination)%3B%0A%09%09%09%09beep.start()%3B%0A%09%09%09%09this.addPipe()%3B%0A%09%09%09%09setTimeout(()%3D%3E%7B%0A%09%09%09%09%09beep.stop()%3B%0A%09%09%09%09%7D%2C300)%3B%0A%09%09%09%7D%0A%09%09%09window.requestAnimationFrame(this.gameLoop)%3B%0A%09%09%7D%0A%09%7D%0A%09addPipe()%7B%0A%09%09this.pipes.push(%5Bthis.x%2Bthis.c.width%2F2%2Cthis.dr%2BMath.random()*(this.c.height-this.dr*2)%5D)%3B%0A%09%7D%0A%09reset()%7B%0A%09%09this.s%20%3D%20false%3B%0A%09%09this.y%20%3D%20this.c.height%2F2%3B%0A%09%09this.x%20%3D%200%3B%0A%09%09this.pipes.length%20%3D%200%3B%0A%09%09this.hs%20%3D%20Math.max(this.sc%2Cthis.hs)%3B%0A%09%09const%20os%20%3D%20this.sc%3B%0A%09%09this.sc%20%3D%200%3B%0A%09%09this.g%20%3D%20-5.5%3B%0A%09%09this.drawStart(true%2Cos)%3B%0A%09%7D%0A%09drawBird()%7B%0A%09%09this.ctx.fillStyle%20%3D%20'yellow'%3B%0A%09%09this.ctx.beginPath()%3B%0A%09%09this.ctx.arc(this.hw%2Cthis.y%2Cthis.r%2C0%2CMath.PI*2)%3B%0A%09%09this.ctx.fill()%3B%0A%09%09this.ctx.closePath()%3B%0A%09%7D%0A%7D%0Aconst%20game%20%3D%20new%20flapGame(document.getElementById('flp-canv')%2Cfalse)%3B%0A%20%20%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E
